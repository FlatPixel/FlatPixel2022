function onWheelFromDocument(e){wheelData=normalizeWheel(e),0==cube.classList.contains("show-bottom")&&wheelData.pixelY>10&&(work.scrollTop=0,rotate("show-bottom"),autoplayVideos(),hasChangedCubeFace=!0,setTimeout(()=>{hasChangedCubeFace=!1},1500)),cube.classList.contains("show-bottom")&&hitVelocityScrollTop>0&&Math.abs(wheelData.pixelY)>hitVelocityScrollTop&&wheelData.pixelY<0&&0==work.scrollTop&&(hitVelocityScrollTop=0,rotate("show-front"),muteAllVideos()),0==work.scrollTop&&wheelData.pixelY<0&&0==hitVelocityScrollTop&&(hitVelocityScrollTop=Math.abs(wheelData.pixelY),setTimeout(()=>{hitVelocityScrollTop=0},1e3)),cube.classList.contains("show-bottom")&&0==hasChangedCubeFace&&work.scrollBy({top:wheelData.pixelY,left:0})}function onWheelFromWork(e){return wheelData=normalizeWheel(e),cube.classList.contains("show-bottom")&&hitVelocityScrollTop>0&&Math.abs(wheelData.pixelY)>hitVelocityScrollTop&&wheelData.pixelY<0&&0==work.scrollTop&&(hitVelocityScrollTop=0,rotate("show-front"),muteAllVideos()),0==work.scrollTop&&wheelData.pixelY<0&&0==hitVelocityScrollTop&&(hitVelocityScrollTop=Math.abs(wheelData.pixelY),setTimeout(()=>{hitVelocityScrollTop=0},1e3)),cube.classList.contains("show-bottom")&&0==hasChangedCubeFace&&work.scrollBy({top:wheelData.pixelY,left:0}),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}function rotate(e){document.getElementById("cube").className=e}function active(e){var t=document.querySelectorAll("nav > ul > li > a");t.forEach(e=>{e.classList.remove("active")}),e&&e.classList.add("active")}function scrollTo(){const e=document.querySelectorAll(".scroll");e.forEach(e=>e.onclick=scrollAnchors)}function scrollAnchors(e,t=null){const o=e=>Math.floor(e.getBoundingClientRect().top);e.preventDefault();var a=t?t.getAttribute("href"):this.getAttribute("href");const l=document.querySelector(a);if(!l)return;const n=o(l);window.scrollBy({top:n-50,left:0,behavior:"smooth"});const i=setInterval(function(){const e=window.innerHeight+window.pageYOffset>=document.body.offsetHeight-2;(0===o(l)||e)&&(l.tabIndex="-1",window.history.pushState("","",a),clearInterval(i))},100)}function toggleMuteVideo(e,t){t=t||!e.media.muted,t?(e.muteIcon&&(e.muteIcon.style.display="block"),e.media.muted=t,e.media.volume=0,e.intervalId&&(clearInterval(e.intervalId),e.intervalId=null,e.lerpValue=0)):(e.muteIcon&&(e.muteIcon.style.display="none"),e.media.muted=t,e.media.volume=0,e.intervalId&&(clearInterval(e.intervalId),e.intervalId=null,e.lerpValue=0),e.intervalId=window.setInterval(lerpVideoSound,200,e,0,1))}function muteAllVideos(){videos.forEach(e=>{toggleMuteVideo(e,!0)})}function lerpVideoSound(e,t,o){e.lerpValue+=.1;var a=lerp(t,o,e.lerpValue);a=EasingFunctions.easeInQuad(a),e.media.volume=Math.max(Math.min(a,1),0),e.lerpValue>=1&&e.intervalId&&(clearInterval(e.intervalId),e.intervalId=null,e.lerpValue=0)}function autoplayVideos(){var e;mobileOnly.matches?(window.pageYOffset,e=window.pageYOffset+window.innerHeight/2):(work.scrollTop,e=work.scrollTop+work.offsetHeight/2);videos.forEach(t=>{var o=t.container.offsetTop,a=t.container.offsetTop+t.container.offsetHeight;e>o&&e<a&&t.media.paused&&(t.playPromise=t.media.play(),t.playPromise&&t.playPromise.then(e=>{t.playPromise=null}).catch(e=>{console.log("Auto-play was prevented")})),(e<o||e>a)&&0==t.media.paused&&(t.playPromise?t.playPromise.then(e=>{t.playPromise=null,t.media.pause()}).catch(e=>{console.log("Auto-play was prevented")}):t.media.pause(),toggleMuteVideo(t,!0)),0})}function lerp(e,t,o){return(1-o)*e+o*t}function debounce(e,t,o){var a;return function(){var l=this,n=arguments,i=function(){a=null,o||e.apply(l,n)},r=o&&!a;clearTimeout(a),a=setTimeout(i,t),r&&e.apply(l,n)}}function normalizeWheel(e){var t=0,o=0,a=0,l=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=o,o=0),a=t*PIXEL_STEP,l=o*PIXEL_STEP,"deltaY"in e&&(l=e.deltaY),"deltaX"in e&&(a=e.deltaX),(a||l)&&e.deltaMode&&(1==e.deltaMode?(a*=LINE_HEIGHT,l*=LINE_HEIGHT):(a*=PAGE_HEIGHT,l*=PAGE_HEIGHT)),a&&!t&&(t=a<1?-1:1),l&&!o&&(o=l<1?-1:1),{spinX:t,spinY:o,pixelX:a,pixelY:l}}var body,main,cube,home,work,wheelData;EasingFunctions={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e};var videos=[],break_mobile_width=600,break_mobile_height=790;const allExceptMobile=window.matchMedia("screen and (min-width: "+(break_mobile_width+1)+"px) and (min-height: "+(break_mobile_height+1)+"px)"),mobileOnly=window.matchMedia("screen and (orientation: portrait) and (max-width: "+break_mobile_width+"px), screen and (orientation: landscape) and (max-height: "+break_mobile_height+"px)"),mobilePortraitOnly=window.matchMedia("screen and (orientation: portrait) and (max-width: "+break_mobile_width+"px)"),mobileLandscapeOnly=window.matchMedia("screen and (orientation: landscape) and (max-height:"+break_mobile_height+"px)");document.addEventListener("DOMContentLoaded",function(){body=document.querySelector("body"),main=document.querySelector("main"),cube=document.querySelector("#cube"),home=document.querySelector("#home"),work=document.querySelector("#work"),mobileLandscapeOnly.matches&&setTimeout(()=>{window.scroll({top:2.45*home.offsetWidth/3,left:0})},100),window.addEventListener("keydown",e=>{"ArrowLeft"==e.key&&(rotate("show-left"),muteAllVideos()),"ArrowUp"==e.key&&(rotate("show-front"),muteAllVideos()),"ArrowRight"==e.key&&(rotate("show-right"),muteAllVideos()),"ArrowDown"==e.key&&(rotate("show-bottom"),autoloadVideos())});var e=document.querySelectorAll("nav > ul > li > a.link-menu");e.forEach(e=>{e.addEventListener("click",t=>{var o=e.getAttribute("data-side");rotate(o),"show-bottom"!=o&&muteAllVideos(),active(e)})});var t=document.querySelector(".give-us-a-shout");t.addEventListener("click",e=>{rotate("show-right");var t=document.querySelector("#btnContact");active(t)}),document.addEventListener("wheel",onWheelFromDocument),work.addEventListener("wheel",onWheelFromWork),scrollTo();var o=work.querySelectorAll(".video-container");o.forEach(e=>{videos.push({container:e,media:e.querySelector("video"),playPromise:null,muteIcon:e.querySelector(".mute"),externalIcon:e.querySelector(".external"),loadingIcon:e.querySelector(".loading"),intervalId:null,lerpValue:0})}),videos.forEach(e=>{e.container.addEventListener("click",t=>{toggleMuteVideo(e)}),e.externalIcon&&e.externalIcon.addEventListener("click",e=>{e.stopPropagation()})}),videos.forEach(e=>{e.media.addEventListener("loadstart",t=>{e.loadingIcon.style.display="block"}),e.media.addEventListener("canplay",t=>{e.loadingIcon.style.display="none"})}),work.addEventListener("scroll",debounce(autoplayVideos,100),!1),document.addEventListener("scroll",debounce(autoplayVideos,100),!1);var a=window.location.hash;if(a.includes("about")){rotate("show-left"),muteAllVideos();var l=document.querySelector("#btnAbout");active(l)}else if(a.includes("home")){rotate("show-front"),muteAllVideos();l=document.querySelector("#btnHome");active(l)}else if(a.includes("work")){rotate("show-bottom");l=document.querySelector("#btnWork");active(l),autoplayVideos()}else if(a.includes("contact")){rotate("show-right"),muteAllVideos();l=document.querySelector("#btnContact");active(l)}});var hasChangedCubeFace=!1,hitVelocityScrollTop=0,PIXEL_STEP=10,LINE_HEIGHT=40,PAGE_HEIGHT=800;