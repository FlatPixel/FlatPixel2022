function onWheelFromDocument(e){wheelData=normalizeWheel(e),0==cube.classList.contains("show-bottom")&&wheelData.pixelY>10&&(work.scrollTop=0,rotate("show-bottom"),replaceWorkBtnToNextBtn(),autoplayVideos(),hasChangedCubeFace=!0,setTimeout(()=>{hasChangedCubeFace=!1},1500)),cube.classList.contains("show-bottom")&&hitVelocityScrollTop>0&&Math.abs(wheelData.pixelY)>hitVelocityScrollTop&&wheelData.pixelY<0&&0==work.scrollTop&&(hitVelocityScrollTop=0,rotate("show-front"),replaceNextBtnToWorkBtn(),muteAllVideos()),0==work.scrollTop&&wheelData.pixelY<0&&0==hitVelocityScrollTop&&(hitVelocityScrollTop=Math.abs(wheelData.pixelY),setTimeout(()=>{hitVelocityScrollTop=0},1e3)),cube.classList.contains("show-bottom")&&0==hasChangedCubeFace&&work.scrollBy({top:wheelData.pixelY,left:0})}function onWheelFromWork(e){return wheelData=normalizeWheel(e),cube.classList.contains("show-bottom")&&hitVelocityScrollTop>0&&Math.abs(wheelData.pixelY)>hitVelocityScrollTop&&wheelData.pixelY<0&&0==work.scrollTop&&(hitVelocityScrollTop=0,rotate("show-front"),replaceNextBtnToWorkBtn(),muteAllVideos()),0==work.scrollTop&&wheelData.pixelY<0&&0==hitVelocityScrollTop&&(hitVelocityScrollTop=Math.abs(wheelData.pixelY),setTimeout(()=>{hitVelocityScrollTop=0},1e3)),cube.classList.contains("show-bottom")&&0==hasChangedCubeFace&&work.scrollBy({top:wheelData.pixelY,left:0}),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}function rotate(e){document.getElementById("cube").className=e}function active(e){var t=document.querySelectorAll("nav > ul > li > a");t.forEach(e=>{e.classList.remove("active")}),e&&e.classList.add("active")}function hideWorkBtn(){var e=document.querySelector("#btnWork");e.parentElement.classList.remove("show"),e.parentElement.classList.add("hide"),setTimeout(()=>{e.parentElement.style.display="none"},250)}function showWorkBtn(){var e=document.querySelector("#btnWork");e.parentElement.style.display="block",e.parentElement.classList.remove("hide"),e.parentElement.classList.add("show")}function showNextBtn(){var e=document.querySelector("#btnNextVideo");e.parentElement.style.display="block",e.parentElement.classList.remove("hide"),e.parentElement.classList.add("show")}function hideNextBtn(){var e=document.querySelector("#btnNextVideo");e.parentElement.classList.remove("show"),e.parentElement.classList.add("hide"),setTimeout(()=>{e.parentElement.style.display="none"},250)}function hideAndShowWorkBtn(){hideNextBtn(),hideWorkBtn(),setTimeout(showWorkBtn,500)}function replaceWorkBtnToNextBtn(){replaceTimeOut&&(clearTimeout(replaceTimeOut),replaceTimeOut=null),hideWorkBtn(),replaceTimeOut=setTimeout(showNextBtn,500)}function replaceNextBtnToWorkBtn(){replaceTimeOut&&(clearTimeout(replaceTimeOut),replaceTimeOut=null),hideNextBtn(),replaceTimeOut=setTimeout(showWorkBtn,500)}function handleNextBtn(e){var t=document.querySelector("#btnNextVideo"),o=(videos.length-1)*work.offsetHeight,n=work.offsetHeight/2;cube.classList.contains("show-bottom")&&work.scrollTop>=o-n?hideNextBtn():cube.classList.contains("show-bottom")&&t.parentElement.classList.contains("hide")&&replaceWorkBtnToNextBtn()}function scrollTo(){const e=document.querySelectorAll(".scroll");e.forEach(e=>e.onclick=scrollAnchors)}function scrollAnchors(e,t=null){const o=e=>Math.floor(e.getBoundingClientRect().top);e.preventDefault();var n=t?t.getAttribute("href"):this.getAttribute("href");const l=document.querySelector(n);if(!l)return;const a=o(l);window.scrollBy({top:a-50,left:0,behavior:"smooth"});const i=setInterval(function(){const e=window.innerHeight+window.pageYOffset>=document.body.offsetHeight-2;(0===o(l)||e)&&(l.tabIndex="-1",window.history.pushState("","",n),clearInterval(i))},100)}function toggleMuteVideo(e,t){t=t||!e.media.muted,t?(e.muteIcon&&(e.muteIcon.style.display="block"),e.media.muted=t,e.media.volume=0,e.intervalId&&(clearInterval(e.intervalId),e.intervalId=null,e.lerpValue=0)):(e.muteIcon&&(e.muteIcon.style.display="none"),e.media.muted=t,e.media.volume=0,e.intervalId&&(clearInterval(e.intervalId),e.intervalId=null,e.lerpValue=0),e.intervalId=window.setInterval(lerpVideoSound,200,e,0,1))}function muteAllVideos(){videos.forEach(e=>{toggleMuteVideo(e,!0)})}function lerpVideoSound(e,t,o){e.lerpValue+=.1;var n=lerp(t,o,e.lerpValue);n=EasingFunctions.easeInQuad(n),e.media.volume=Math.max(Math.min(n,1),0),e.lerpValue>=1&&e.intervalId&&(clearInterval(e.intervalId),e.intervalId=null,e.lerpValue=0)}function autoplayVideos(){var e;mobileOnly.matches?(window.pageYOffset,e=window.pageYOffset+window.innerHeight/2):(work.scrollTop,e=work.scrollTop+work.offsetHeight/2);videos.forEach(t=>{var o=t.container.offsetTop,n=t.container.offsetTop+t.container.offsetHeight;e>o&&e<n&&t.media.paused&&(t.playPromise=t.media.play(),t.playPromise&&t.playPromise.then(e=>{t.playPromise=null}).catch(e=>{console.log("Auto-play was prevented")})),(e<o||e>n)&&0==t.media.paused&&(t.playPromise?t.playPromise.then(e=>{t.playPromise=null,t.media.pause()}).catch(e=>{console.log("Auto-play was prevented")}):t.media.pause(),toggleMuteVideo(t,!0)),0})}function lerp(e,t,o){return(1-o)*e+o*t}function debounce(e,t,o){var n;return function(){var l=this,a=arguments,i=function(){n=null,o||e.apply(l,a)},r=o&&!n;clearTimeout(n),n=setTimeout(i,t),r&&e.apply(l,a)}}function normalizeWheel(e){var t=0,o=0,n=0,l=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=o,o=0),n=t*PIXEL_STEP,l=o*PIXEL_STEP,"deltaY"in e&&(l=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||l)&&e.deltaMode&&(1==e.deltaMode?(n*=LINE_HEIGHT,l*=LINE_HEIGHT):(n*=PAGE_HEIGHT,l*=PAGE_HEIGHT)),n&&!t&&(t=n<1?-1:1),l&&!o&&(o=l<1?-1:1),{spinX:t,spinY:o,pixelX:n,pixelY:l}}var body,main,cube,work,wheelData;EasingFunctions={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e};var videos=[],break_mobile_width=600,break_mobile_height=600;const allExceptMobile=window.matchMedia("screen and (min-width: "+break_mobile_width+"px) and (min-height: "+break_mobile_height+"px)"),mobileOnly=window.matchMedia("screen and (orientation: portrait) and (max-width: "+break_mobile_width+"px), screen and (orientation: landscape) and (max-height: "+break_mobile_height+"px)"),mobilePortraitOnly=window.matchMedia("screen and (orientation: portrait) and (max-width: "+break_mobile_width+"px)"),mobileLandscapeOnly=window.matchMedia("screen and (orientation: landscape) and (max-height:"+break_mobile_height+"px)");document.addEventListener("DOMContentLoaded",function(){body=document.querySelector("body"),main=document.querySelector("main"),work=document.querySelector("#work"),cube=document.getElementById("cube"),window.addEventListener("keydown",e=>{37==e.keyCode&&(rotate("show-left"),hideAndShowWorkBtn(),muteAllVideos()),38==e.keyCode&&(rotate("show-front"),hideAndShowWorkBtn(),muteAllVideos()),39==e.keyCode&&(rotate("show-right"),hideAndShowWorkBtn(),muteAllVideos()),40==e.keyCode&&(rotate("show-bottom"),replaceWorkBtnToNextBtn())});var e=document.querySelectorAll("nav > ul > li > a.link-menu");e.forEach(e=>{e.addEventListener("click",t=>{var o=e.getAttribute("data-side");rotate(o),"show-bottom"!=o?(muteAllVideos(),hideAndShowWorkBtn()):replaceWorkBtnToNextBtn(),active(e)})});var t=document.querySelector(".give-us-a-shout");t.addEventListener("click",e=>{rotate("show-right"),hideAndShowWorkBtn();var t=document.querySelector("#btnContact");active(t)}),document.addEventListener("wheel",onWheelFromDocument),work.addEventListener("wheel",onWheelFromWork);var o=document.querySelector("#btnNextVideo");o.addEventListener("click",e=>{var t=work.offsetHeight,o=work.scrollTop,n=Math.min(Math.floor(o/t)+1,videos.length-1),l=t*n;work.scrollTo({top:l,left:0,behavior:"smooth"})}),scrollTo();var n=work.querySelectorAll(".video-container");n.forEach(e=>{videos.push({container:e,media:e.querySelector("video"),playPromise:null,muteIcon:e.querySelector(".mute"),externalIcon:e.querySelector(".external"),loadingIcon:e.querySelector(".loading"),intervalId:null,lerpValue:0})}),videos.forEach(e=>{e.container.addEventListener("click",t=>{toggleMuteVideo(e)}),e.externalIcon&&e.externalIcon.addEventListener("click",e=>{e.stopPropagation()})}),videos.forEach(e=>{e.media.addEventListener("loadstart",t=>{e.loadingIcon.style.display="block"}),e.media.addEventListener("canplay",t=>{e.loadingIcon.style.display="none"})}),work.addEventListener("scroll",debounce(handleNextBtn,100),!1),work.addEventListener("scroll",debounce(autoplayVideos,100),!1),document.addEventListener("scroll",debounce(autoplayVideos,100),!1);var l=window.location.hash;if(l.includes("about")){rotate("show-left"),hideAndShowWorkBtn(),muteAllVideos();var a=document.querySelector("#btnAbout");active(a)}else if(l.includes("home")){rotate("show-front"),replaceNextBtnToWorkBtn(),hideAndShowWorkBtn(),muteAllVideos();a=document.querySelector("#btnHome");active(a)}else if(l.includes("work")){rotate("show-bottom"),replaceWorkBtnToNextBtn();a=document.querySelector("#btnWork");active(a),autoplayVideos()}else if(l.includes("contact")){rotate("show-right"),hideAndShowWorkBtn(),muteAllVideos();a=document.querySelector("#btnContact");active(a)}});var hasChangedCubeFace=!1,hitVelocityScrollTop=0,replaceTimeOut=null,PIXEL_STEP=10,LINE_HEIGHT=40,PAGE_HEIGHT=800;